json_encodeが失敗するのは、各要素が「"」でくくられてない場合があるそうです。
今回もそれが原因でした。
また数値をダブルクォーテーションでくくる方法なんですが、num+'' これでよいそうです。

連想配列は{}
配列は[]